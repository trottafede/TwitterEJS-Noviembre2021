<% if (user) { %>
<div id="inicio">
  <h1><%- user.firstname %> <%- user.lastname %></h1>
</div>

<div id="profileInfo">
  <div class="row">
    <div class="col-lg-12">
      <div id="bgImg">
        <div id="imgContainer">
          <img
            src="<%- user.image %>"
            alt="<%- user.firstname %> <%- user.lastname %>"
          />
        </div>
      </div>

      <div class="text-end">
        <a
          type="button"
          class="btn btn-outline-light mt-3"
          data-bs-toggle="modal"
          data-bs-target="#editProfileModal"
          data-bs-whatever="@getbootstrap"
        >
          Editar Perfil
        </a>
      </div>
      <div id="contactInfo">
        <h2><%- user.firstname %> <%- user.lastname %></h2>
        <em>@<%- user.username %></em>
        <% if (user.description) { %>
        <p><%- user.description %></p>
        <% } else {%>
        <p>Escribe una descripción <a href="#"> aquí</a></p>
        <% } %>
        <em
          ><i class="fas fa-calendar-alt"></i> Se unió en <%-
          user.createdAt.toLocaleDateString('en-us', { weekday:"long",
          year:"numeric", month:"long"}); %></em
        >
        <p>26 siguiendo - 4 Seguidores</p>
      </div>
    </div>
  </div>
  <hr />
</div>

<!-- Modal -->
<div
  class="modal fade bgGrey"
  id="editProfileModal"
  tabindex="-1"
  aria-labelledby="editProfileModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content bgBlack">
      <div class="modal-header">
        <h5 class="modal-title" id="editProfileModalLabel">Editar Perfil</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form action="/users/<%- user.username %> " method="post">
          <div class="mb-3">
            <label for="firstname" class="col-form-label">Nombre</label>
            <input
              type="text"
              value="<%- user.firstname %> "
              name="firstname"
              class="form-control"
              id="firstname"
            />
          </div>

          <div class="mb-3">
            <label for="lastname" class="col-form-label">Apellido</label>
            <input
              type="text"
              value="<%- user.lastname %> "
              name="lastname"
              class="form-control"
              id="lastname"
            />
          </div>

          <div class="mb-3">
            <label for="age" class="col-form-label">Edad</label>
            <input
              value="<%- user.age %>"
              type="number"
              name="age"
              class="form-control"
              id="age"
            />
          </div>

          <!-- <div class="mb-3">
            <label for="password" class="col-form-label"
              >Nueva Contraseña</label
            >
            <input
              type="password"
              name="password"
              class="form-control"
              id="password"
            />
          </div> -->

          <div class="mb-3">
            <label for="description" class="col-form-label">Descripción</label>
            <input
              value="<%- user.description %> "
              type="text"
              name="description"
              class="form-control"
              id="description"
            />
          </div>

          <div class="mb-3">
            <label for="image" class="col-form-label">Imágen</label>
            <input
              value="<%- user.image %> "
              type="text"
              name="image"
              class="form-control"
              id="image"
            />
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button type="submit" class="btn btn-primary">Guardar</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- My tweets -->

<% if (user.tweetsList.length > 0) { %>
<%user.tweetsList.forEach(function(tweet){ %>

<div class="singleTweet">
  <div class="row">
    <div class="col-lg-1">
      <img
        src="<%- user.image %>"
        alt="<%- user.firstname %> <%- user.lastname %>"
      />
    </div>
    <div class="col-lg-11">
      <p>
        <%- user.username %>
        <em
          >@<%- user.username %> - <%-
          tweet.createdAt.toLocaleDateString('en-us', { weekday:"short",
          year:"numeric", month:"short"}); %></em
        >
      </p>
      <p><%- tweet.Text %></p>
      <div class="d-flex justify-content-around">
        <em><i class="far fa-comment"></i> 20</em>
        <em><i class="fas fa-retweet"></i> 5</em>
        <em><i class="far fa-heart"></i> 80</em>
        <i class="fas fa-share"></i>
      </div>
    </div>
  </div>
</div>

<% }); %> <% } else {%>
<p>You have no tweets</p>
<% } %> <% } %>
